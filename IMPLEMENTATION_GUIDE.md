# VocabQuest êµ¬í˜„ ê°€ì´ë“œ (ì´ˆë³´ììš©)

> ğŸ’¡ **ì´ ê°€ì´ë“œëŠ” ì½”ë”© ì…ë¬¸ìë¥¼ ìœ„í•´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.**
> ê° ë‹¨ê³„ë§ˆë‹¤ ë³µì‚¬-ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥í•œ ì½”ë“œì™€ ìƒì„¸í•œ ì„¤ëª…ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [í•„ìˆ˜ í”„ë¡œê·¸ë¨ ì„¤ì¹˜](#1-í•„ìˆ˜-í”„ë¡œê·¸ë¨-ì„¤ì¹˜)
2. [í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •](#2-í”„ë¡œì íŠ¸-ì´ˆê¸°-ì„¤ì •)
3. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#3-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
4. [ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„](#4-ì¸ì¦-ì‹œìŠ¤í…œ-êµ¬í˜„)
5. [ê´€ë¦¬ì ê¸°ëŠ¥ êµ¬í˜„](#5-ê´€ë¦¬ì-ê¸°ëŠ¥-êµ¬í˜„)
6. [í•™ìƒ í•™ìŠµ ê¸°ëŠ¥ êµ¬í˜„](#6-í•™ìƒ-í•™ìŠµ-ê¸°ëŠ¥-êµ¬í˜„)
7. [ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ì‹œìŠ¤í…œ](#7-ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜-ì‹œìŠ¤í…œ)
8. [ë…í•´ ì—°ìŠµ ê¸°ëŠ¥](#8-ë…í•´-ì—°ìŠµ-ê¸°ëŠ¥)
9. [ë°°í¬í•˜ê¸°](#9-ë°°í¬í•˜ê¸°)

---

## 1. í•„ìˆ˜ í”„ë¡œê·¸ë¨ ì„¤ì¹˜

### 1.1 Node.js ì„¤ì¹˜
1. https://nodejs.org ì ‘ì†
2. **LTS ë²„ì „** (ì™¼ìª½ ì´ˆë¡ìƒ‰ ë²„íŠ¼) ë‹¤ìš´ë¡œë“œ
3. ì„¤ì¹˜ í”„ë¡œê·¸ë¨ ì‹¤í–‰ (ëª¨ë“  ì˜µì…˜ ê¸°ë³¸ê°’ìœ¼ë¡œ ì§„í–‰)

**í™•ì¸ ë°©ë²•:**
```bash
node --version
# v20.x.x ê°™ì€ ë²„ì „ì´ ë‚˜ì˜¤ë©´ ì„±ê³µ
```

### 1.2 VS Code ì„¤ì¹˜
1. https://code.visualstudio.com ì ‘ì†
2. Download ë²„íŠ¼ í´ë¦­
3. ì„¤ì¹˜ í›„ ì‹¤í–‰

**ì¶”ì²œ í™•ì¥ í”„ë¡œê·¸ë¨:**
- ES7+ React/Redux/React-Native snippets
- Prisma
- Tailwind CSS IntelliSense
- ESLint
- Prettier

### 1.3 Git ì„¤ì¹˜
1. https://git-scm.com ì ‘ì†
2. Download ë²„íŠ¼ í´ë¦­
3. ì„¤ì¹˜ (ëª¨ë“  ì˜µì…˜ ê¸°ë³¸ê°’)

---

## 2. í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •

### 2.1 Next.js í”„ë¡œì íŠ¸ ìƒì„±

í„°ë¯¸ë„(ëª…ë ¹ í”„ë¡¬í”„íŠ¸)ì„ ì—´ê³ :

```bash
# í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™ (ì˜ˆ: C:\Users\user\working)
cd C:\Users\user\working

# Next.js í”„ë¡œì íŠ¸ ìƒì„±
npx create-next-app@14 vocabquest

# ì„¤ì • ì§ˆë¬¸ì— ë‹¤ìŒê³¼ ê°™ì´ ë‹µë³€:
# âœ” Would you like to use TypeScript? â€¦ Yes
# âœ” Would you like to use ESLint? â€¦ Yes
# âœ” Would you like to use Tailwind CSS? â€¦ Yes
# âœ” Would you like to use `src/` directory? â€¦ No
# âœ” Would you like to use App Router? â€¦ Yes
# âœ” Would you like to customize the default import alias? â€¦ No

# í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
cd vocabquest
```

### 2.2 í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨
npm install @prisma/client
npm install -D prisma

# ìƒíƒœ ê´€ë¦¬
npm install zustand

# í¼ ê´€ë¦¬
npm install react-hook-form

# ì• ë‹ˆë©”ì´ì…˜
npm install framer-motion

# ì•„ì´ì½˜
npm install lucide-react

# CSV íŒŒì‹±
npm install papaparse
npm install -D @types/papaparse

# ì¸ì¦ (ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”)
npm install bcrypt
npm install -D @types/bcrypt

# ë‚ ì§œ ì²˜ë¦¬
npm install date-fns
```

### 2.3 í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡° ë§Œë“¤ê¸°

```bash
# Windows ëª…ë ¹ í”„ë¡¬í”„íŠ¸ì—ì„œ:
mkdir app\(admin)
mkdir app\(admin)\login
mkdir app\(admin)\dashboard
mkdir app\(admin)\textbooks
mkdir app\(admin)\students
mkdir app\(admin)\assignments

mkdir app\(student)
mkdir app\(student)\login
mkdir app\(student)\dashboard
mkdir app\(student)\vocabulary
mkdir app\(student)\reading

mkdir app\api\auth\admin
mkdir app\api\auth\student
mkdir app\api\vocabulary
mkdir app\api\reading
mkdir app\api\assignments
mkdir app\api\dashboard

mkdir components\admin
mkdir components\student
mkdir components\shared

mkdir lib
mkdir types
mkdir prisma
```

### 2.4 VS Codeë¡œ í”„ë¡œì íŠ¸ ì—´ê¸°

```bash
code .
```

---

## 3. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 3.1 Prisma ì´ˆê¸°í™”

í„°ë¯¸ë„ì—ì„œ:

```bash
npx prisma init
```

ì´ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒ íŒŒì¼ë“¤ì„ ìƒì„±í•©ë‹ˆë‹¤:
- `prisma/schema.prisma` (ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ)
- `.env` (í™˜ê²½ ë³€ìˆ˜ íŒŒì¼)

### 3.2 Prisma ìŠ¤í‚¤ë§ˆ ì‘ì„±

`prisma/schema.prisma` íŒŒì¼ì„ ì—´ê³  **ì „ì²´ ë‚´ìš©ì„ ì‚­ì œ**í•œ í›„ ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ êµì²´:

```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ê´€ë¦¬ì
model Admin {
  id        Int      @id @default(autoincrement())
  password  String   // bcrypt í•´ì‹œ
  createdAt DateTime @default(now())
}

// ì‚¬ìš©ì (í•™ìƒ)
model User {
  id            Int      @id @default(autoincrement())
  name          String
  learningCode  String   @unique // í•™ìŠµ ì½”ë“œ (ì˜ˆ: "0115", "2024001")
  role          String   @default("student")
  level         Int      @default(1)
  totalPoints   Int      @default(0)
  currentStreak Int      @default(0)
  longestStreak Int      @default(0)
  createdAt     DateTime @default(now())

  // Relations
  vocabularyProgress VocabularyProgress[]
  quizResults        QuizResult[]
  readingAnswers     ReadingAnswer[]
  achievements       Achievement[]
  learningLogs       LearningLog[]
  dailyStreaks       DailyStreak[]
  assignments        Assignment[]

  @@map("users")
}

// êµì¬
model Textbook {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  createdAt   DateTime @default(now())

  // Relations
  units       Unit[]
  assignments Assignment[]

  @@map("textbooks")
}

// ë‹¨ì›
model Unit {
  id          Int    @id @default(autoincrement())
  textbookId  Int
  unitNumber  Int
  title       String
  description String?

  // Relations
  textbook        Textbook          @relation(fields: [textbookId], references: [id], onDelete: Cascade)
  vocabulary      Vocabulary[]
  readingPassages ReadingPassage[]
  quizResults     QuizResult[]
  assignments     Assignment[]

  @@map("units")
}

// ë‹¨ì–´
model Vocabulary {
  id                   Int     @id @default(autoincrement())
  unitId               Int
  problemNumber        Int?
  word                 String
  meanings             Json    // ["ì˜ë¯¸1", "ì˜ë¯¸2"]
  partOfSpeech         String?
  pronunciation        String?
  exampleSentence      String?
  sentenceTranslation  String?
  audioUrl             String?

  // Relations
  unit               Unit                 @relation(fields: [unitId], references: [id], onDelete: Cascade)
  vocabularyProgress VocabularyProgress[]

  @@map("vocabulary")
}

// ë…í•´ ì§€ë¬¸
model ReadingPassage {
  id            Int      @id @default(autoincrement())
  unitId        Int
  problemNumber Int
  title         String?
  fullText      String   @db.Text
  lines         Json     // [{lineIndex, english, korean}]
  createdAt     DateTime @default(now())

  // Relations
  unit           Unit            @relation(fields: [unitId], references: [id], onDelete: Cascade)
  readingAnswers ReadingAnswer[]

  @@map("reading_passages")
}

// ê³¼ì œ í• ë‹¹
model Assignment {
  id                  Int      @id @default(autoincrement())
  studentId           Int
  textbookId          Int
  unitId              Int
  assignmentType      String   // "vocabulary" | "reading" | "both"
  vocabularyItems     Json?    // {all: true} | {problem_numbers: [1,2]} | {word_ids: [1,2]}
  readingPassageIds   Json?    // [1, 3, 5]
  dueDate             DateTime?
  status              String   @default("assigned") // "assigned" | "in_progress" | "completed"
  createdAt           DateTime @default(now())

  // Relations
  student  User     @relation(fields: [studentId], references: [id], onDelete: Cascade)
  textbook Textbook @relation(fields: [textbookId], references: [id], onDelete: Cascade)
  unit     Unit     @relation(fields: [unitId], references: [id], onDelete: Cascade)

  @@map("assignments")
}

// ë‹¨ì–´ í•™ìŠµ ì§„ë„
model VocabularyProgress {
  id            Int      @id @default(autoincrement())
  studentId     Int
  vocabularyId  Int
  status        String   @default("learning") // "learning" | "mastered"
  isBookmarked  Boolean  @default(false)
  studyCount    Int      @default(0)
  lastStudiedAt DateTime @default(now())

  // Relations
  student    User       @relation(fields: [studentId], references: [id], onDelete: Cascade)
  vocabulary Vocabulary @relation(fields: [vocabularyId], references: [id], onDelete: Cascade)

  @@unique([studentId, vocabularyId])
  @@map("vocabulary_progress")
}

// í€´ì¦ˆ ê²°ê³¼
model QuizResult {
  id             Int      @id @default(autoincrement())
  studentId      Int
  unitId         Int
  quizType       String   // "speed" | "subjective" | "sentence"
  score          Int
  totalQuestions Int
  correctAnswers Int
  comboMax       Int      @default(0)
  timeTaken      Int      // seconds
  pointsEarned   Int
  createdAt      DateTime @default(now())

  // Relations
  student User @relation(fields: [studentId], references: [id], onDelete: Cascade)
  unit    Unit @relation(fields: [unitId], references: [id], onDelete: Cascade)

  @@map("quiz_results")
}

// ë…í•´ ë‹µì•ˆ (ë²„ì „ ê´€ë¦¬)
model ReadingAnswer {
  id             Int      @id @default(autoincrement())
  studentId      Int
  passageId      Int
  versions       Json     // [{version, translations, submittedAt, timeSpent, type}]
  currentVersion Int      @default(1)
  totalAttempts  Int      @default(1)
  createdAt      DateTime @default(now())
  lastModifiedAt DateTime @updatedAt

  // Relations
  student User           @relation(fields: [studentId], references: [id], onDelete: Cascade)
  passage ReadingPassage @relation(fields: [passageId], references: [id], onDelete: Cascade)

  @@unique([studentId, passageId])
  @@map("reading_answers")
}

// ë°°ì§€
model Achievement {
  id        Int      @id @default(autoincrement())
  studentId Int
  badgeType String
  badgeName String
  earnedAt  DateTime @default(now())

  // Relations
  student User @relation(fields: [studentId], references: [id], onDelete: Cascade)

  @@map("achievements")
}

// í•™ìŠµ ë¡œê·¸
model LearningLog {
  id           Int      @id @default(autoincrement())
  studentId    Int
  activityType String
  pointsEarned Int
  metadata     Json?
  createdAt    DateTime @default(now())

  // Relations
  student User @relation(fields: [studentId], references: [id], onDelete: Cascade)

  @@map("learning_logs")
}

// ì¼ì¼ í•™ìŠµ ê¸°ë¡
model DailyStreak {
  id                  Int      @id @default(autoincrement())
  studentId           Int
  date                DateTime @db.Date
  studyTime           Int      // seconds
  pointsEarned        Int
  activitiesCompleted Int

  // Relations
  student User @relation(fields: [studentId], references: [id], onDelete: Cascade)

  @@unique([studentId, date])
  @@map("daily_streaks")
}
```

### 3.3 ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •

#### Vercel Postgres ì‚¬ìš© (ê¶Œì¥)

1. https://vercel.com ì ‘ì† í›„ íšŒì›ê°€ì…/ë¡œê·¸ì¸
2. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
3. Storage íƒ­ â†’ Create Database â†’ Postgres ì„ íƒ
4. `.env.local` íŒŒì¼ ìƒì„± í›„ ì—°ê²° ì •ë³´ ë³µì‚¬

`.env.local` íŒŒì¼:
```env
# Database
DATABASE_URL="postgres://..."

# Session Secret
SESSION_SECRET="your-super-secret-key-change-this-in-production"
```

#### ë¡œì»¬ ê°œë°œìš© (ëŒ€ì•ˆ)

ë¡œì»¬ì—ì„œ ê°œë°œë§Œ í•˜ë ¤ë©´ SQLite ì‚¬ìš©:

`prisma/schema.prisma`ì—ì„œ datasource ë¶€ë¶„ ìˆ˜ì •:
```prisma
datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}
```

### 3.4 Prisma í´ë¼ì´ì–¸íŠ¸ ìƒì„±

```bash
# Prisma í´ë¼ì´ì–¸íŠ¸ ìƒì„±
npx prisma generate

# ë°ì´í„°ë² ì´ìŠ¤ì— ìŠ¤í‚¤ë§ˆ ì ìš©
npx prisma db push

# Prisma Studio ì‹¤í–‰ (ë°ì´í„°ë² ì´ìŠ¤ GUI)
npx prisma studio
```

### 3.5 Prisma í´ë¼ì´ì–¸íŠ¸ ì‹±ê¸€í†¤ ìƒì„±

`lib/prisma.ts` íŒŒì¼ ìƒì„±:

```typescript
// lib/prisma.ts

import { PrismaClient } from '@prisma/client'

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined
}

export const prisma =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: ['query', 'error', 'warn'],
  })

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma
```

### 3.6 ì‹œë“œ ë°ì´í„° ìƒì„± (ì„ íƒì‚¬í•­)

`prisma/seed.ts` íŒŒì¼ ìƒì„±:

```typescript
// prisma/seed.ts

import { PrismaClient } from '@prisma/client'
import bcrypt from 'bcrypt'

const prisma = new PrismaClient()

async function main() {
  console.log('ğŸŒ± Seeding database...')

  // ê´€ë¦¬ì ê³„ì • ìƒì„±
  const hashedPassword = await bcrypt.hash('admin1234', 10)
  const admin = await prisma.admin.upsert({
    where: { id: 1 },
    update: {},
    create: {
      password: hashedPassword,
    },
  })
  console.log('âœ… Admin created:', admin.id)

  // ìƒ˜í”Œ í•™ìƒ ìƒì„±
  const student1 = await prisma.user.upsert({
    where: { learningCode: '0115' },
    update: {},
    create: {
      name: 'ê¹€ì² ìˆ˜',
      learningCode: '0115',
      level: 3,
      totalPoints: 750,
      currentStreak: 7,
      longestStreak: 12,
    },
  })
  console.log('âœ… Student created:', student1.name)

  // ìƒ˜í”Œ êµì¬ ìƒì„±
  const textbook = await prisma.textbook.create({
    data: {
      title: 'ëª¨ì˜ê³ ì‚¬ 1íšŒ',
      description: '2024ë…„ 1í•™ê¸° ëª¨ì˜ê³ ì‚¬',
      units: {
        create: [
          {
            unitNumber: 1,
            title: 'Unit 1',
            description: 'Basic Vocabulary',
          },
        ],
      },
    },
  })
  console.log('âœ… Textbook created:', textbook.title)

  console.log('ğŸ‰ Seeding complete!')
}

main()
  .catch((e) => {
    console.error('âŒ Seeding failed:', e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

`package.json`ì— seed ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€:

```json
{
  "prisma": {
    "seed": "tsx prisma/seed.ts"
  }
}
```

ì„¤ì¹˜ í›„ ì‹¤í–‰:
```bash
npm install -D tsx
npx prisma db seed
```

---

## 4. ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„

### 4.1 ì„¸ì…˜ ê´€ë¦¬ ìœ í‹¸ë¦¬í‹°

`lib/auth.ts` íŒŒì¼ ìƒì„±:

```typescript
// lib/auth.ts

import { cookies } from 'next/headers'
import bcrypt from 'bcrypt'
import { prisma } from './prisma'

// ì„¸ì…˜ í† í° ìƒì„± (ê°„ë‹¨í•œ ë°©ì‹)
export function generateSessionToken(): string {
  return Math.random().toString(36).substring(2) + Date.now().toString(36)
}

// ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ í™•ì¸
export async function verifyAdminPassword(password: string): Promise<boolean> {
  const admin = await prisma.admin.findFirst()
  if (!admin) return false
  return bcrypt.compare(password, admin.password)
}

// í•™ìŠµ ì½”ë“œë¡œ í•™ìƒ ì°¾ê¸°
export async function findStudentByLearningCode(code: string) {
  return prisma.user.findUnique({
    where: { learningCode: code },
  })
}

// ì„¸ì…˜ ì¿ í‚¤ ì„¤ì •
export async function setSessionCookie(userId: number, role: 'admin' | 'student') {
  const token = generateSessionToken()
  const cookieStore = await cookies()

  cookieStore.set('session', JSON.stringify({ userId, role, token }), {
    httpOnly: true,
    secure: process.env.NODE_ENV === 'production',
    sameSite: 'lax',
    maxAge: 60 * 60 * 24 * 7, // 7ì¼
  })
}

// ì„¸ì…˜ ê°€ì ¸ì˜¤ê¸°
export async function getSession() {
  const cookieStore = await cookies()
  const sessionCookie = cookieStore.get('session')

  if (!sessionCookie) return null

  try {
    return JSON.parse(sessionCookie.value)
  } catch {
    return null
  }
}

// ì„¸ì…˜ ì‚­ì œ
export async function deleteSession() {
  const cookieStore = await cookies()
  cookieStore.delete('session')
}

// í˜„ì¬ ì‚¬ìš©ì ê°€ì ¸ì˜¤ê¸°
export async function getCurrentUser() {
  const session = await getSession()
  if (!session || !session.userId) return null

  if (session.role === 'student') {
    return prisma.user.findUnique({
      where: { id: session.userId },
    })
  }

  return null
}

// ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
export async function requireAdmin() {
  const session = await getSession()
  if (!session || session.role !== 'admin') {
    throw new Error('Unauthorized')
  }
  return session
}

// í•™ìƒ ê¶Œí•œ í™•ì¸
export async function requireStudent() {
  const session = await getSession()
  if (!session || session.role !== 'student') {
    throw new Error('Unauthorized')
  }
  return session
}
```

### 4.2 ê´€ë¦¬ì ë¡œê·¸ì¸ í˜ì´ì§€

`app/(admin)/login/page.tsx` íŒŒì¼ ìƒì„±:

```typescript
// app/(admin)/login/page.tsx

'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation'

export default function AdminLoginPage() {
  const [password, setPassword] = useState('')
  const [error, setError] = useState('')
  const [loading, setLoading] = useState(false)
  const router = useRouter()

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setError('')
    setLoading(true)

    try {
      const response = await fetch('/api/auth/admin/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ password }),
      })

      const data = await response.json()

      if (response.ok) {
        router.push('/dashboard')
      } else {
        setError(data.error || 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
      }
    } catch (err) {
      setError('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600">
      <div className="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md">
        <h1 className="text-3xl font-bold text-center mb-8 text-gray-800">
          ğŸ“š VocabQuest - ê´€ë¦¬ì
        </h1>

        <form onSubmit={handleSubmit} className="space-y-6">
          <div>
            <label htmlFor="password" className="block text-sm font-medium text-gray-700 mb-2">
              ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸:
            </label>
            <input
              type="password"
              id="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
              required
            />
          </div>

          {error && (
            <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
              {error}
            </div>
          )}

          <button
            type="submit"
            disabled={loading}
            className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
          >
            {loading ? 'ë¡œê·¸ì¸ ì¤‘...' : 'ë¡œê·¸ì¸'}
          </button>
        </form>
      </div>
    </div>
  )
}
```

### 4.3 ê´€ë¦¬ì ë¡œê·¸ì¸ API

`app/api/auth/admin/login/route.ts` íŒŒì¼ ìƒì„±:

```typescript
// app/api/auth/admin/login/route.ts

import { NextRequest, NextResponse } from 'next/server'
import { verifyAdminPassword, setSessionCookie } from '@/lib/auth'

export async function POST(request: NextRequest) {
  try {
    const { password } = await request.json()

    if (!password) {
      return NextResponse.json(
        { error: 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' },
        { status: 400 }
      )
    }

    const isValid = await verifyAdminPassword(password)

    if (!isValid) {
      return NextResponse.json(
        { error: 'ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.' },
        { status: 401 }
      )
    }

    // ì„¸ì…˜ ì„¤ì • (ê´€ë¦¬ìëŠ” userIdë¥¼ 1ë¡œ ê³ ì •)
    await setSessionCookie(1, 'admin')

    return NextResponse.json({ success: true })
  } catch (error) {
    console.error('Admin login error:', error)
    return NextResponse.json(
      { error: 'ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' },
      { status: 500 }
    )
  }
}
```

### 4.4 í•™ìƒ ë¡œê·¸ì¸ í˜ì´ì§€

`app/(student)/login/page.tsx` íŒŒì¼ ìƒì„±:

```typescript
// app/(student)/login/page.tsx

'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation'

export default function StudentLoginPage() {
  const [learningCode, setLearningCode] = useState('')
  const [error, setError] = useState('')
  const [loading, setLoading] = useState(false)
  const router = useRouter()

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setError('')
    setLoading(true)

    try {
      const response = await fetch('/api/auth/student/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ learningCode }),
      })

      const data = await response.json()

      if (response.ok) {
        router.push('/dashboard')
      } else {
        setError(data.error || 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
      }
    } catch (err) {
      setError('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-green-400 to-blue-500">
      <div className="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md">
        <h1 className="text-3xl font-bold text-center mb-4 text-gray-800">
          ğŸ“š VocabQuest
        </h1>
        <p className="text-center text-gray-600 mb-8">
          í•™ìŠµì„ ì‹œì‘í•˜ë ¤ë©´ í•™ìŠµ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”
        </p>

        <form onSubmit={handleSubmit} className="space-y-6">
          <div>
            <label htmlFor="code" className="block text-sm font-medium text-gray-700 mb-2">
              í•™ìŠµ ì½”ë“œ:
            </label>
            <input
              type="text"
              id="code"
              value={learningCode}
              onChange={(e) => setLearningCode(e.target.value)}
              className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-2xl font-bold"
              placeholder="0115"
              required
            />
          </div>

          {error && (
            <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
              {error}
            </div>
          )}

          <button
            type="submit"
            disabled={loading}
            className="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
          >
            {loading ? 'ë¡œê·¸ì¸ ì¤‘...' : 'í•™ìŠµ ì‹œì‘í•˜ê¸°'}
          </button>

          <p className="text-sm text-center text-gray-500">
            ğŸ’¡ í•™ìŠµ ì½”ë“œëŠ” ì„ ìƒë‹˜ê»˜ì„œ ì•Œë ¤ì£¼ì…¨ì–´ìš”
          </p>
        </form>
      </div>
    </div>
  )
}
```

### 4.5 í•™ìƒ ë¡œê·¸ì¸ API

`app/api/auth/student/login/route.ts` íŒŒì¼ ìƒì„±:

```typescript
// app/api/auth/student/login/route.ts

import { NextRequest, NextResponse } from 'next/server'
import { findStudentByLearningCode, setSessionCookie } from '@/lib/auth'

export async function POST(request: NextRequest) {
  try {
    const { learningCode } = await request.json()

    if (!learningCode) {
      return NextResponse.json(
        { error: 'í•™ìŠµ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' },
        { status: 400 }
      )
    }

    const student = await findStudentByLearningCode(learningCode)

    if (!student) {
      return NextResponse.json(
        { error: 'í•™ìŠµ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.' },
        { status: 401 }
      )
    }

    // ì„¸ì…˜ ì„¤ì •
    await setSessionCookie(student.id, 'student')

    return NextResponse.json({
      success: true,
      student: {
        id: student.id,
        name: student.name,
        level: student.level,
      },
    })
  } catch (error) {
    console.error('Student login error:', error)
    return NextResponse.json(
      { error: 'ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' },
      { status: 500 }
    )
  }
}
```

### 4.6 ë¡œê·¸ì•„ì›ƒ API

`app/api/auth/logout/route.ts` íŒŒì¼ ìƒì„±:

```typescript
// app/api/auth/logout/route.ts

import { NextResponse } from 'next/server'
import { deleteSession } from '@/lib/auth'

export async function POST() {
  try {
    await deleteSession()
    return NextResponse.json({ success: true })
  } catch (error) {
    console.error('Logout error:', error)
    return NextResponse.json(
      { error: 'ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' },
      { status: 500 }
    )
  }
}
```

---

## 5. ê´€ë¦¬ì ê¸°ëŠ¥ êµ¬í˜„

### 5.1 ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë ˆì´ì•„ì›ƒ

`app/(admin)/layout.tsx` íŒŒì¼ ìƒì„±:

```typescript
// app/(admin)/layout.tsx

import { redirect } from 'next/navigation'
import { requireAdmin } from '@/lib/auth'
import AdminNav from '@/components/admin/AdminNav'

export default async function AdminLayout({
  children,
}: {
  children: React.ReactNode
}) {
  try {
    await requireAdmin()
  } catch {
    redirect('/admin/login')
  }

  return (
    <div className="min-h-screen bg-gray-100">
      <AdminNav />
      <main className="container mx-auto px-4 py-8">
        {children}
      </main>
    </div>
  )
}
```

### 5.2 ê´€ë¦¬ì ë„¤ë¹„ê²Œì´ì…˜ ì»´í¬ë„ŒíŠ¸

`components/admin/AdminNav.tsx` íŒŒì¼ ìƒì„±:

```typescript
// components/admin/AdminNav.tsx

'use client'

import Link from 'next/link'
import { useRouter } from 'next/navigation'
import { BookOpen, Users, ClipboardList, BarChart3, LogOut } from 'lucide-react'

export default function AdminNav() {
  const router = useRouter()

  const handleLogout = async () => {
    await fetch('/api/auth/logout', { method: 'POST' })
    router.push('/admin/login')
  }

  return (
    <nav className="bg-white shadow-md">
      <div className="container mx-auto px-4">
        <div className="flex items-center justify-between h-16">
          <div className="flex items-center space-x-8">
            <Link href="/dashboard" className="text-xl font-bold text-blue-600">
              ğŸ“š VocabQuest ê´€ë¦¬ì
            </Link>

            <div className="hidden md:flex space-x-4">
              <Link
                href="/dashboard"
                className="flex items-center space-x-2 px-3 py-2 rounded-md hover:bg-gray-100"
              >
                <BarChart3 size={20} />
                <span>ëŒ€ì‹œë³´ë“œ</span>
              </Link>

              <Link
                href="/textbooks"
                className="flex items-center space-x-2 px-3 py-2 rounded-md hover:bg-gray-100"
              >
                <BookOpen size={20} />
                <span>êµì¬ ê´€ë¦¬</span>
              </Link>

              <Link
                href="/students"
                className="flex items-center space-x-2 px-3 py-2 rounded-md hover:bg-gray-100"
              >
                <Users size={20} />
                <span>í•™ìƒ ê´€ë¦¬</span>
              </Link>

              <Link
                href="/assignments"
                className="flex items-center space-x-2 px-3 py-2 rounded-md hover:bg-gray-100"
              >
                <ClipboardList size={20} />
                <span>ê³¼ì œ í• ë‹¹</span>
              </Link>
            </div>
          </div>

          <button
            onClick={handleLogout}
            className="flex items-center space-x-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-md"
          >
            <LogOut size={20} />
            <span>ë¡œê·¸ì•„ì›ƒ</span>
          </button>
        </div>
      </div>
    </nav>
  )
}
```

ì´ ê°€ì´ë“œëŠ” ê³„ì†ë©ë‹ˆë‹¤...

---

## ë‹¤ìŒ ë‹¨ê³„

ìœ„ì˜ ì„¤ì •ì„ ì™„ë£Œí•˜ë©´:
1. âœ… í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • ì™„ë£Œ
2. âœ… ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì™„ë£Œ
3. âœ… ì¸ì¦ ì‹œìŠ¤í…œ (ê´€ë¦¬ì + í•™ìƒ) ì™„ë£Œ
4. âœ… ê´€ë¦¬ì ë„¤ë¹„ê²Œì´ì…˜ ì™„ë£Œ

**í…ŒìŠ¤íŠ¸ ë°©ë²•:**

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†:
# http://localhost:3000/admin/login (ê´€ë¦¬ì)
# http://localhost:3000/login (í•™ìƒ)
```

ë‹¤ìŒ íŒŒì¼ì—ì„œ ê³„ì†ë©ë‹ˆë‹¤:
- `IMPLEMENTATION_GUIDE_PART2.md` - êµì¬/ë‹¨ì–´ ê´€ë¦¬
- `IMPLEMENTATION_GUIDE_PART3.md` - í•™ìƒ í•™ìŠµ ê¸°ëŠ¥
- `IMPLEMENTATION_GUIDE_PART4.md` - ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ë° ë…í•´
